{"ast":null,"code":"import _regeneratorRuntime from\"G:/Projetos/LojasIntegrada/src/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"G:/Projetos/LojasIntegrada/src/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{LoginService}from'../Services/LoginServices';import settings from\"../settings.json\";var apiBaseUrl=settings.apiBaseUrl;export var AuthenticationHelper={getAuthentication:getAuthentication,checkAuthentication:checkAuthentication,doingLogout:doingLogout};function getAuthentication(_x,_x2){return _getAuthentication.apply(this,arguments);}function _getAuthentication(){_getAuthentication=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var apiUrl,credential,jsonCredential;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:apiUrl=\"\".concat(apiBaseUrl,\"/v1/Login\");_context.next=3;return LoginService.getLogin(username,password);case 3:credential=_context.sent;if(credential){_context.next=6;break;}return _context.abrupt(\"return\",null);case 6:jsonCredential=JSON.stringify(credential);localStorage.setItem('ComprasJa:AccessToken',jsonCredential);return _context.abrupt(\"return\",checkAuthentication());case 9:case\"end\":return _context.stop();}}},_callee);}));return _getAuthentication.apply(this,arguments);}function checkAuthentication(){var credential=localStorage.getItem('ComprasJa:AccessToken');if(!credential){return null;}return JSON.parse(credential);}function doingLogout(){localStorage.removeItem('ComprasJa:AccessToken');window.location.replace('/Login');}","map":{"version":3,"names":["LoginService","settings","apiBaseUrl","AuthenticationHelper","getAuthentication","checkAuthentication","doingLogout","username","password","apiUrl","getLogin","credential","jsonCredential","JSON","stringify","localStorage","setItem","getItem","parse","removeItem","window","location","replace"],"sources":["G:/Projetos/LojasIntegrada/src/frontend/src/Helper/AuthenticationHelper.tsx"],"sourcesContent":["\r\nimport { LoginService } from '../Services/LoginServices';\r\nimport settings from \"../settings.json\";\r\n\r\nconst apiBaseUrl: string = settings.apiBaseUrl;\r\n\r\n\r\nexport const AuthenticationHelper = {\r\n    getAuthentication,\r\n    checkAuthentication,\r\n    doingLogout\r\n};\r\nasync function getAuthentication(username: string, password: string) {\r\n    const apiUrl = `${apiBaseUrl}/v1/Login`;\r\n\r\n    var credential = await LoginService.getLogin(username, password);\r\n    if (!credential) {\r\n        return null;\r\n    }\r\n    var jsonCredential = JSON.stringify(credential);\r\n    localStorage.setItem('ComprasJa:AccessToken', jsonCredential);\r\n    return checkAuthentication();\r\n}\r\nfunction checkAuthentication() {\r\n    var credential: any = localStorage.getItem('ComprasJa:AccessToken');\r\n    if (!credential) {\r\n        return null;\r\n    }\r\n    return JSON.parse(credential);\r\n}\r\nfunction doingLogout() {\r\n    localStorage.removeItem('ComprasJa:AccessToken');\r\n    window.location.replace('/Login');\r\n}"],"mappings":"0QACA,OAASA,YAAT,KAA6B,2BAA7B,CACA,MAAOC,SAAP,KAAqB,kBAArB,CAEA,GAAMC,WAAkB,CAAGD,QAAQ,CAACC,UAApC,CAGA,MAAO,IAAMC,qBAAoB,CAAG,CAChCC,iBAAiB,CAAjBA,iBADgC,CAEhCC,mBAAmB,CAAnBA,mBAFgC,CAGhCC,WAAW,CAAXA,WAHgC,CAA7B,C,QAKQF,kB,qKAAf,iBAAiCG,QAAjC,CAAmDC,QAAnD,yJACUC,MADV,WACsBP,UADtB,oCAG2BF,aAAY,CAACU,QAAb,CAAsBH,QAAtB,CAAgCC,QAAhC,CAH3B,QAGQG,UAHR,kBAISA,UAJT,yDAKe,IALf,SAOQC,cAPR,CAOyBC,IAAI,CAACC,SAAL,CAAeH,UAAf,CAPzB,CAQII,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAA8CJ,cAA9C,EARJ,gCASWP,mBAAmB,EAT9B,wD,oDAWA,QAASA,oBAAT,EAA+B,CAC3B,GAAIM,WAAe,CAAGI,YAAY,CAACE,OAAb,CAAqB,uBAArB,CAAtB,CACA,GAAI,CAACN,UAAL,CAAiB,CACb,MAAO,KAAP,CACH,CACD,MAAOE,KAAI,CAACK,KAAL,CAAWP,UAAX,CAAP,CACH,CACD,QAASL,YAAT,EAAuB,CACnBS,YAAY,CAACI,UAAb,CAAwB,uBAAxB,EACAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,QAAxB,EACH"},"metadata":{},"sourceType":"module"}